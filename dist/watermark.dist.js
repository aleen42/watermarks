!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var o=window.Watermarks=window.Watermarks||function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.x,a=r.y,l=t.scrollWidth,s=t.scrollHeight,c=l,f=s;if(o||a){var u=window.innerWidth,h=window.innerHeight,d=o.scrollWidth,v=a.scrollHeight;c=d>u?u:d,f=v>h?h:v}var y=t.querySelector(".j-watermark");y||((y=document.createElement("canvas")).className="j-watermark",y.setAttribute("style","position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none"),t.appendChild(y)),this.canvas=y,t.style.position="relative";var p=(e=Object.assign({DEBUG_MODE:!1,watermarks:{region:{x:300,y:300,width:150,height:150},align:"left",alpha:.2,fontSize:16,fontRotate:Math.PI/4,lineHeightRatio:1.5,reservedRatio:9}},e)).watermarks,g=p.region,w=function(){var r=p.reservedRatio,i=l>c?r*g.x:0,u=s>f?r*g.y:0;y.width=c+i,y.height=f+u;var h={},d={x:l>c,y:s>f};if(d.x||d.y){var v=function(t){Object.entries({x:["left",i,l-y.width,"scrollLeft"],y:["top",u,s-y.height,"scrollTop"]}).forEach((function(e){var r=n(e,2),i=r[0],l=n(r[1],4),s=l[0],c=l[1],f=l[2],u=l[3];if(d[i]&&(!t||i===t)){var v=Math.floor(Math.floor(("x"===i?o:a)[u]/c)*c/g[i]),p=(v-=v%2)*g[i];p=p>=f?f:p,h[i]!==p&&(h[i]=p,y.style[s]=p+"px")}}))};v(),o||a?o===a?o&&o.addEventListener("scroll",v.bind(0,"")):(o&&o.addEventListener("scroll",v.bind(0,"x")),a&&a.addEventListener("scroll",v.bind(0,"y"))):t.addEventListener("scroll",v.bind(0,""))}e.contents=e.contents.filter((function(t){return t.length}))},b=function(){var t=y.getContext("2d");t.clearRect(0,0,y.width,y.height);for(var r=0;r<y.width;r+=g.x)for(var o=function(o){t.save(),t.globalAlpha=p.alpha,t.font=p.fontSize+"px '微软雅黑'",t.translate(r+(o/g.y+1)%2*g.width,o),e.DEBUG_MODE&&t.fillRect(0,0,e.watermarks.region.width,e.watermarks.region.height);var a=p.fontRotate;t.rotate(-a),t.textAlign=p.align;var l=p.fontSize,s=p.lineHeightRatio*l,c=[Math.sin(a),Math.cos(a),Math.max.apply(Math,i(e.contents.map((function(e){return t.measureText(e).width})))),l,l+s*(e.contents.length-1)],f=c[0],u=c[1],h=c[2],d=c[3],v=c[4],y=g.width/2*(1-f*u)/u-h/2-g.height/2*f,w=(g.height/2+g.width/2)*f-v/2+d*u;[[["fillStyle","black"],"fillText"],[["strokeStyle","white"],"strokeText"]].forEach((function(r){var i=n(r,2),o=n(i[0],2),a=o[0],l=o[1],c=i[1];t[a]=l,e.contents.forEach((function(e,r){return t[c](e,y,w+s*r)}))})),e.DEBUG_MODE&&(t.strokeStyle="#a10000"),e.DEBUG_MODE&&t.strokeRect(y,w-l*u,h,s+l),t.restore()},a=0;a<y.height;a+=g.y)o(a)};setTimeout((function(){w(),b()}),0)};Object.assign(o.prototype,{reset:function(){this.canvas.width=this.canvas.height=0}}),t.exports=o}]);